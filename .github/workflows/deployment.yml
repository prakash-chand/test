name: Deployment

on:
    push:
        branches:
            - main # Trigger on push to main branch

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout code
              uses: actions/checkout@v4

            - name: Build Docker image
              run: docker build -t ${{ vars.DOCKERHUB_IMAGE }}:latest .
              continue-on-error: true

            - name: Push to Docker Hub
              run: |
                  echo "${{ secrets.DOCKERHUB_TOKEN }}" | docker login -u "${{ secrets.DOCKERHUB_USERNAME }}" --password-stdin
                  docker push ${{ vars.DOCKERHUB_IMAGE }}:latest
              continue-on-error: true
